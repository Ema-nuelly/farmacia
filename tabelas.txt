CREATE TABLE Clientes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    idade INT CHECK (idade >= 0),
    senha VARCHAR(255) NOT NULL,
    email VARCHAR(150) UNIQUE NOT NULL,
    endereco VARCHAR(255),
    telefone VARCHAR(20),
    foto VARCHAR(255)
);

CREATE TABLE Produto (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    preco DECIMAL(10,2) NOT NULL CHECK (preco >= 0),
    validade DATE,
    disponivel BOOLEAN DEFAULT TRUE,
    foto VARCHAR(255),
    bula TEXT
);

CREATE TABLE Carrinho (
    codigo INT AUTO_INCREMENT PRIMARY KEY,
    data_criacao DATETIME DEFAULT CURRENT_TIMESTAMP,
    data_compra DATETIME,
    valor_total DECIMAL(10,2) DEFAULT 0 CHECK (valor_total >= 0)
);

CREATE TABLE Carrinho_Produto (
    id INT AUTO_INCREMENT PRIMARY KEY,
    carrinho_id INT,
    produto_id INT,
    quantidade INT DEFAULT 1 CHECK (quantidade > 0),
    FOREIGN KEY (carrinho_id) REFERENCES Carrinho(codigo) ON DELETE CASCADE,
    FOREIGN KEY (produto_id) REFERENCES Produto(id) ON DELETE CASCADE
);
